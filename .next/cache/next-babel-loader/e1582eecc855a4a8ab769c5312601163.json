{"ast":null,"code":"var _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/yjh/Documents/React/easyway/pages/index.tsx\";\n\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport $ from 'jquery';\nimport { inject, observer } from 'mobx-react';\nimport Cookies from 'js-cookie';\nimport Header from 'components/layout/header';\nimport Modal from 'components/modal';\nimport Title from 'components/pages/title';\nimport Logo from 'components/pages/logo';\nimport Tab from 'components/pages/tab';\nimport List from 'components/pages/list';\nimport Footer from 'components/pages/footer';\nimport HourlyWeather from 'components/pages/hourlyWeather';\nimport config from 'config.json';\nlet IndexPage = (_dec = inject('store'), _dec(_class = observer(_class = (_temp = class IndexPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      refresh: false\n    });\n  }\n\n  static getInitialProps(ctx) {\n    return {\n      token: ctx.query.token\n    };\n  }\n\n  changeTabMode() {\n    const height = $('#title').height() + $('#logo').height() + $('.tab').height();\n    $(window).scroll(() => {\n      const windowHeight = $(document).scrollTop();\n\n      if (windowHeight > height) {\n        $('.tab').removeClass('tab').addClass('mini-tab');\n        $('#list').css({\n          'margin-top': '290px'\n        });\n      } else {\n        $('.mini-tab').removeClass('mini-tab').addClass('tab');\n        $('#list').css({\n          'margin-top': '-50px'\n        });\n      }\n    });\n  }\n\n  refresh() {\n    this.setState({\n      refresh: true\n    });\n  }\n\n  set_token(token) {\n    if (Cookies.get(token)) {\n      window.location.href = `${config.REDIRECT_URL}?token=${token}`;\n    }\n\n    Cookies.set('token', token, {\n      expires: 7\n    });\n  }\n\n  componentDidMount() {\n    this.changeTabMode();\n    this.set_token(this.props.token);\n  }\n\n  render() {\n    const token = this.props.token || this.props.store.token;\n\n    if (token) {\n      {\n        this.props.store.signin(token);\n      }\n    }\n\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }\n    }, __jsx(Header, {\n      title: \"EASYWAY\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }), __jsx(Title, {\n      isSignin: this.props.store.isSignin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }), __jsx(Logo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }), __jsx(Tab, {\n      handler: this.refresh.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }), __jsx(List, {\n      refresh: this.state.refresh,\n      token: token,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }\n    }), __jsx(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }), __jsx(Modal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, __jsx(HourlyWeather, {\n      refresh: this.state.refresh,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}, _temp)) || _class) || _class);\nexport default IndexPage;","map":{"version":3,"sources":["/Users/yjh/Documents/React/easyway/pages/index.tsx"],"names":["React","$","inject","observer","Cookies","Header","Modal","Title","Logo","Tab","List","Footer","HourlyWeather","config","IndexPage","Component","refresh","getInitialProps","ctx","token","query","changeTabMode","height","window","scroll","windowHeight","document","scrollTop","removeClass","addClass","css","setState","set_token","get","location","href","REDIRECT_URL","set","expires","componentDidMount","props","render","store","signin","isSignin","bind","state"],"mappings":"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","sourcesContent":["import React from 'react';\nimport $ from 'jquery';\nimport { inject, observer } from 'mobx-react';\nimport Cookies from 'js-cookie';\n\nimport Header from 'components/layout/header';\nimport Modal from 'components/modal';\nimport Title from 'components/pages/title';\nimport Logo from 'components/pages/logo';\nimport Tab from 'components/pages/tab';\nimport List from 'components/pages/list';\nimport Footer from 'components/pages/footer';\nimport HourlyWeather from 'components/pages/hourlyWeather';\n\nimport { IStore } from 'store/store';\nimport config from 'config.json';\n\ninterface IndexPageProps {\n  store: IStore,\n  token: string\n}\n\n@inject('store')\n@observer\nclass IndexPage extends React.Component<IndexPageProps> {\n  static getInitialProps(ctx: any) {\n    return {token: ctx.query.token}\n  }\n\n  state = {\n    refresh: false\n  };\n\n  changeTabMode() {\n    const height = $('#title').height()! + $('#logo').height()! + $('.tab').height()!;\n    $(window).scroll(() => {\n      const windowHeight = $(document).scrollTop();\n      if(windowHeight! > height) {\n        $('.tab').removeClass('tab').addClass('mini-tab');\n        $('#list').css({'margin-top': '290px'});\n      } else {\n        $('.mini-tab').removeClass('mini-tab').addClass('tab');\n        $('#list').css({'margin-top': '-50px'});\n      }\n    });\n  }\n\n  refresh() {\n    this.setState({refresh: true});\n  }\n\n  set_token(token: string) {\n    if(Cookies.get(token)) {\n      window.location.href = `${config.REDIRECT_URL}?token=${token}`;\n    }\n    Cookies.set('token', token, { expires: 7 });\n  }\n\n  componentDidMount() {\n    this.changeTabMode();\n    this.set_token(this.props.token)\n  }\n\n  render() {\n    const token = this.props.token || this.props.store.token;\n    if(token) {\n      {this.props.store.signin(token)}\n    }\n\n    return (\n      <div>\n        <Header title='EASYWAY'/>\n\n        <Title isSignin={this.props.store.isSignin}/>\n        <Logo/>\n        <Tab handler={this.refresh.bind(this)}/>\n        <List refresh={this.state.refresh} token={token}/>\n        <Footer/>\n\n        <Modal>\n          <HourlyWeather refresh={this.state.refresh}/>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default IndexPage;\n"]},"metadata":{},"sourceType":"module"}