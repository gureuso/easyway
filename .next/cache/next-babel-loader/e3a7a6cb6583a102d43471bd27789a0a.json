{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/yjh/Documents/React/easyway/pages/index.tsx\";\n\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport $ from 'jquery';\nimport { inject, observer } from 'mobx-react';\nimport Cookies from 'js-cookie';\nimport Header from 'components/layout/header';\nimport Modal from 'components/modal';\nimport Title from 'components/pages/title';\nimport Logo from 'components/pages/logo';\nimport Tab from 'components/pages/tab';\nimport List from 'components/pages/list';\nimport Footer from 'components/pages/footer';\nimport HourlyWeather from 'components/pages/hourlyWeather';\nimport config from 'config.json';\nvar IndexPage = (_dec = inject('store'), _dec(_class = observer(_class = (_temp = /*#__PURE__*/function (_React$Component) {\n  _inherits(IndexPage, _React$Component);\n\n  var _super = _createSuper(IndexPage);\n\n  function IndexPage() {\n    var _this;\n\n    _classCallCheck(this, IndexPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      refresh: false\n    });\n\n    return _this;\n  }\n\n  _createClass(IndexPage, [{\n    key: \"changeTabMode\",\n    value: function changeTabMode() {\n      var height = $('#title').height() + $('#logo').height() + $('.tab').height();\n      $(window).scroll(function () {\n        var windowHeight = $(document).scrollTop();\n\n        if (windowHeight > height) {\n          $('.tab').removeClass('tab').addClass('mini-tab');\n          $('#list').css({\n            'margin-top': '290px'\n          });\n        } else {\n          $('.mini-tab').removeClass('mini-tab').addClass('tab');\n          $('#list').css({\n            'margin-top': '-50px'\n          });\n        }\n      });\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      this.setState({\n        refresh: true\n      });\n    }\n  }, {\n    key: \"set_token\",\n    value: function set_token(token) {\n      if (token != undefined) {\n        Cookies.set('token', token, {\n          expires: 7\n        });\n      }\n    }\n  }, {\n    key: \"redirect\",\n    value: function redirect(token) {\n      if (token != undefined) {\n        window.location.href = \"\".concat(config.REDIRECT_URL, \"?token=\").concat(token);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.changeTabMode();\n      this.set_token(this.props.token);\n      this.redirect(this.props.token);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var token = this.props.token || this.props.store.token;\n\n      if (token) {\n        {\n          this.props.store.signin(token);\n        }\n      }\n\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 7\n        }\n      }, __jsx(Header, {\n        title: \"EASYWAY\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }\n      }), __jsx(Title, {\n        isSignin: this.props.store.isSignin,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 9\n        }\n      }), __jsx(Logo, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }\n      }), __jsx(Tab, {\n        handler: this.refresh.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }\n      }), __jsx(List, {\n        refresh: this.state.refresh,\n        token: token,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 9\n        }\n      }), __jsx(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 9\n        }\n      }), __jsx(Modal, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 9\n        }\n      }, __jsx(HourlyWeather, {\n        refresh: this.state.refresh,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      })));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps(ctx) {\n      return {\n        token: ctx.query.token\n      };\n    }\n  }]);\n\n  return IndexPage;\n}(React.Component), _temp)) || _class) || _class);\nexport default IndexPage;","map":{"version":3,"sources":["/Users/yjh/Documents/React/easyway/pages/index.tsx"],"names":["React","$","inject","observer","Cookies","Header","Modal","Title","Logo","Tab","List","Footer","HourlyWeather","config","IndexPage","refresh","height","window","scroll","windowHeight","document","scrollTop","removeClass","addClass","css","setState","token","undefined","set","expires","location","href","REDIRECT_URL","changeTabMode","set_token","props","redirect","store","signin","isSignin","bind","state","ctx","query","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport $ from 'jquery';\nimport { inject, observer } from 'mobx-react';\nimport Cookies from 'js-cookie';\n\nimport Header from 'components/layout/header';\nimport Modal from 'components/modal';\nimport Title from 'components/pages/title';\nimport Logo from 'components/pages/logo';\nimport Tab from 'components/pages/tab';\nimport List from 'components/pages/list';\nimport Footer from 'components/pages/footer';\nimport HourlyWeather from 'components/pages/hourlyWeather';\n\nimport { IStore } from 'store/store';\nimport config from 'config.json';\n\ninterface IndexPageProps {\n  store: IStore,\n  token: string\n}\n\n@inject('store')\n@observer\nclass IndexPage extends React.Component<IndexPageProps> {\n  static getInitialProps(ctx: any) {\n    return {token: ctx.query.token}\n  }\n\n  state = {\n    refresh: false\n  };\n\n  changeTabMode() {\n    const height = $('#title').height()! + $('#logo').height()! + $('.tab').height()!;\n    $(window).scroll(() => {\n      const windowHeight = $(document).scrollTop();\n      if(windowHeight! > height) {\n        $('.tab').removeClass('tab').addClass('mini-tab');\n        $('#list').css({'margin-top': '290px'});\n      } else {\n        $('.mini-tab').removeClass('mini-tab').addClass('tab');\n        $('#list').css({'margin-top': '-50px'});\n      }\n    });\n  }\n\n  refresh() {\n    this.setState({refresh: true});\n  }\n\n  set_token(token: string) {\n    if(token != undefined) {\n      Cookies.set('token', token, { expires: 7 });\n    }\n  }\n  \n  redirect(token: string) {\n    if(token != undefined) {\n      window.location.href = `${config.REDIRECT_URL}?token=${token}`;\n    }\n  }\n\n  componentDidMount() {\n    this.changeTabMode();\n    this.set_token(this.props.token)\n    this.redirect(this.props.token)\n  }\n\n  render() {\n    const token = this.props.token || this.props.store.token;\n    if(token) {\n      {this.props.store.signin(token)}\n    }\n\n    return (\n      <div>\n        <Header title='EASYWAY'/>\n\n        <Title isSignin={this.props.store.isSignin}/>\n        <Logo/>\n        <Tab handler={this.refresh.bind(this)}/>\n        <List refresh={this.state.refresh} token={token}/>\n        <Footer/>\n\n        <Modal>\n          <HourlyWeather refresh={this.state.refresh}/>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default IndexPage;\n"]},"metadata":{},"sourceType":"module"}