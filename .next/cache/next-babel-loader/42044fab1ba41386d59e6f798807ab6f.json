{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport moment from 'moment';\nimport $ from 'jquery';\nimport Modal from 'components/modal';\nimport { BusUI } from 'lib/bus';\nimport { WeatherAPI } from 'lib/weather';\nimport { SubwayUI } from 'lib/subway';\nimport { Interval } from 'lib/common';\n\nclass List extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"_ismounted\", true);\n\n    _defineProperty(this, \"state\", {\n      currentTime: '',\n      currentWeather: ''\n    });\n  }\n\n  setCurrentTime() {\n    const interval = new Interval();\n    interval.set(() => {\n      if (this._ismounted) {\n        this.setState({\n          currentTime: moment().format('HH:mm:ss')\n        });\n      }\n    }, 1000);\n  }\n\n  setCurrentWeather() {\n    const weatherAPI = new WeatherAPI();\n    weatherAPI.getCurrentWeather().then(data => {\n      if (this._ismounted) {\n        this.setState({\n          currentWeather: __jsx(\"div\", {\n            id: \"current_weather\"\n          }, __jsx(\"div\", {\n            id: \"current_weather_title\",\n            className: \"list\"\n          }, __jsx(\"div\", null, __jsx(\"img\", {\n            src: data.icon\n          })), __jsx(\"div\", null, __jsx(\"p\", null, data.temp, \"\\xB0\"))), __jsx(\"p\", {\n            id: \"current_weather_main\"\n          }, data.main), __jsx(\"p\", {\n            id: \"current_weather_desc\"\n          }, data.desc), __jsx(\"div\", {\n            id: \"current_weather_more\"\n          }, __jsx(\"img\", {\n            src: \"/static/img/plus_btn_01.svg\",\n            onClick: Modal.active\n          })))\n        });\n      }\n    });\n  }\n\n  setCurrentBus() {\n    const target = $('#current_bus_message');\n    BusUI.setCurrentBus(target);\n  }\n\n  setCurrentSubway() {\n    const target = $('#current_subway_message');\n    SubwayUI.setCurrentSubway(target);\n  }\n\n  setAll() {\n    this.setCurrentTime();\n    this.setCurrentWeather();\n    this.setCurrentBus();\n    this.setCurrentSubway();\n  }\n\n  componentDidMount() {\n    this._ismounted = true;\n    this.setAll();\n  }\n\n  componentWillUnmount() {\n    this._ismounted = false;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.refresh == true) {\n      this.setAll();\n    }\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: \"content\"\n    }, __jsx(\"div\", {\n      className: \"inner-content\",\n      id: \"list\"\n    }, __jsx(\"div\", {\n      className: \"list\"\n    }, __jsx(\"div\", null, __jsx(\"p\", {\n      id: \"current_time\"\n    }, this.state.currentTime)), __jsx(\"div\", null, this.state.currentWeather), __jsx(\"div\", null, __jsx(\"div\", {\n      id: \"current_bus\"\n    }, __jsx(\"p\", {\n      id: \"current_bus_title\"\n    }, \"6613\"), __jsx(\"p\", {\n      id: \"current_bus_message\"\n    }))), __jsx(\"div\", null, __jsx(\"div\", {\n      id: \"current_subway\"\n    }, __jsx(\"p\", {\n      id: \"current_subway_title\"\n    }, \"\\uB300\\uB9BC\\uC5ED\"), __jsx(\"p\", {\n      id: \"current_subway_message\"\n    }))))));\n  }\n\n}\n\nexport default List;","map":null,"metadata":{},"sourceType":"module"}